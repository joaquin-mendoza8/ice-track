{% extends 'base.html' %}
{% import 'components/macros.html' as macros %}

{% block title %}Shipments{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shipments.css') }}" type="text/css">
{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4">Shipments</h1>

    {% if shipments %}
    <table class="table table-hover table-borderless">
        <thead>
            <tr>
                <!-- Dynamically generate table headers from the shipment dictionary keys -->
                {% for key in shipments[0].keys() %}
                    <th scope="col">{{ key.replace('_', ' ').capitalize() }}</th>
                {% endfor %}
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Dynamically generate table rows for each shipment -->
            {% for shipment in shipments %}
            <tr>
                {% for value in shipment.values() %}
                    <td>{{ value }}</td>
                {% endfor %}
                <td>
                    <!-- Provide an edit link for each shipment -->
                    <a href="{{ url_for('shipments.shipments_update_shipment') }}?shipment-id={{ shipment['id'] }}" class="btn btn-sm btn-primary">Edit</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info" role="alert">
        No shipments found. Create an order to generate shipments automatically.
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/shipments.js') }}"></script>
{% endblock %}